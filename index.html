<html>
<link rel="stylesheet" href="main.css">
<title>FANOF Group Generator</title>
<meta property="og:type" content="website">
<meta property="og:site_name" content="FANOF Group Generator">
<meta property="og:title" content="FANOF Group Generator">
<meta property="og:description" content="A tool to instantly generate group for school assignments.">
<meta name="theme-color" content="#1f8b4c">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="students.js"></script>

<body>
    <div>
        <h1>FANOF Group Generator</h1>
        <h2><i>made with <3 by <a href="https://instagr.am/wildanrfq">jer</a></i></h2>
    </div>
    <div style="text-align: center;">
        <button type="button" class="show-story"><b>Show Story</b></button>
        <div class="story">
            <br>
            <p>Awalnya, gua liat jeje ama haura pas mau buat kelompok kok kaya lama banget padahal cuma
                nentuin kelompok doang. Jadinya gua bikin aja deh website ini buat ngecepetin proses pembuatan
                kelompoknya.
                Gua buat ini juga fair kok, tiap generation uda pasti unique.</p>
            <p><i>*kecuali buat kelompok terakhir karena bakal ada 4 cewe & 2 cowo.</i></p>
            <br>
        </div>
        <br>
        <br>
        <button type="button" class="generate" onclick="show()">Generate</button>
        <br>
        <p id="result"></p>
    </div>
</body>

<script>
    var coll = document.getElementsByClassName("show-story");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
                this.innerHTML = "Show Story";
            } else {
                content.style.display = "block";
                this.innerHTML = "Hide Story";
            }
        });
    }
</script>
<script>
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function generate() {
        try {
            shuffle(students);

            const males = students.filter(s => s.includes(" - m")).map(m => m.replace(" - m", ""));
            const females = students.filter(s => s.includes(" - f")).map(f => f.replace(" - f", ""));

            const groups = [];

            for (let i = 0; i < 6; i++) {
                const result = [];

                for (let j = 0; j < 3 && males.length > 0; j++) {
                    result.push(males.shift());
                }

                const femalesTake = groups.length < 5 ? 3 : 4;

                for (let j = 0; j < femalesTake && females.length > 0; j++) {
                    result.push(females.shift());
                }

                groups.push(result);
            }

            return groups;
        } catch (error) {
            console.error(error);
        }
    }

    function show() {
        let doc = document.getElementById("result");
        doc.innerHTML = "Hello!";
        doc.style = "font-size: large;";
        generate();
    }

</script>

</html>